import{a4 as M,F as S,aa as j,b as T,ab as A,w as C,q as K,K as D,c as q,d as _,H as J,h as m,V as Q}from"./vue-Di5-u55g.js";import{c as I,x as g,z as h,W as Y,R as N}from"./Scrollbar-CN-lPcvH.js";function ee(e=8){return Math.random().toString(16).slice(2,2+e)}function k(e,t=!0,n=[]){return e.forEach(r=>{if(r!==null){if(typeof r!="object"){(typeof r=="string"||typeof r=="number")&&n.push(M(String(r)));return}if(Array.isArray(r)){k(r,t,n);return}if(r.type===S){if(r.children===null)return;Array.isArray(r.children)&&k(r.children,t,n)}else{if(r.type===j&&t)return;n.push(r)}}}),n}const te=/^(\d|\.)+$/,R=/(\d|\.)+/;function fe(e,{c:t=1,offset:n=0,attachPx:r=!0}={}){if(typeof e=="number"){const i=(e+n)*t;return i===0?"0":`${i}px`}else if(typeof e=="string")if(te.test(e)){const i=(Number(e)+n)*t;return r?i===0?"0":`${i}px`:`${i}`}else{const i=R.exec(e);return i?e.replace(R,String((Number(i[0])+n)*t)):e}return e}function ne(e){const t=T(!!e.value);if(t.value)return A(t);const n=C(e,r=>{r&&(t.value=!0,n())});return A(t)}const re=typeof window<"u";let d,y;const ie=()=>{var e,t;d=re?(t=(e=document)===null||e===void 0?void 0:e.fonts)===null||t===void 0?void 0:t.ready:void 0,y=!1,d!==void 0?d.then(()=>{y=!0}):y=!0};ie();function he(e){if(y)return;let t=!1;K(()=>{y||d==null||d.then(()=>{t||e()})}),D(()=>{t=!0})}function ye(e,t){return q(()=>{for(const n of t)if(e[n]!==void 0)return e[n];return e[t[t.length-1]]})}const pe=I("n-modal-body"),xe=I("n-drawer-body"),be=I("n-drawer"),me=I("n-popover-body");function B(e,t,n="default"){const r=t[n];if(r===void 0)throw new Error(`[vueuc/${e}]: slot[${n}] is empty.`);return r()}function w(e,t=!0,n=[]){return e.forEach(r=>{if(r!==null){if(typeof r!="object"){(typeof r=="string"||typeof r=="number")&&n.push(M(String(r)));return}if(Array.isArray(r)){w(r,t,n);return}if(r.type===S){if(r.children===null)return;Array.isArray(r.children)&&w(r.children,t,n)}else r.type!==j&&n.push(r)}}),n}function ge(e,t,n="default"){const r=t[n];if(r===void 0)throw new Error(`[vueuc/${e}]: slot[${n}] is empty.`);const i=w(r());if(i.length===1)return i[0];throw new Error(`[vueuc/${e}]: slot[${n}] should have exactly one child.`)}const c="@@coContext",ue={mounted(e,{value:t,modifiers:n}){e[c]={handler:void 0},typeof t=="function"&&(e[c].handler=t,g("clickoutside",e,t,{capture:n.capture}))},updated(e,{value:t,modifiers:n}){const r=e[c];typeof t=="function"?r.handler?r.handler!==t&&(h("clickoutside",e,r.handler,{capture:n.capture}),r.handler=t,g("clickoutside",e,t,{capture:n.capture})):(e[c].handler=t,g("clickoutside",e,t,{capture:n.capture})):r.handler&&(h("clickoutside",e,r.handler,{capture:n.capture}),r.handler=void 0)},unmounted(e,{modifiers:t}){const{handler:n}=e[c];n&&h("clickoutside",e,n,{capture:t.capture}),e[c].handler=void 0}},Ie=ue;function se(e,t){console.error(`[vdirs/${e}]: ${t}`)}class oe{constructor(){this.elementZIndex=new Map,this.nextZIndex=2e3}get elementCount(){return this.elementZIndex.size}ensureZIndex(t,n){const{elementZIndex:r}=this;if(n!==void 0){t.style.zIndex=`${n}`,r.delete(t);return}const{nextZIndex:i}=this;r.has(t)&&r.get(t)+1===this.nextZIndex||(t.style.zIndex=`${i}`,r.set(t,i),this.nextZIndex=i+1,this.squashState())}unregister(t,n){const{elementZIndex:r}=this;r.has(t)?r.delete(t):n===void 0&&se("z-index-manager/unregister-element","Element not found when unregistering."),this.squashState()}squashState(){const{elementCount:t}=this;t||(this.nextZIndex=2e3),this.nextZIndex-t>2500&&this.rearrange()}rearrange(){const t=Array.from(this.elementZIndex.entries());t.sort((n,r)=>n[1]-r[1]),this.nextZIndex=2e3,t.forEach(n=>{const r=n[0],i=this.nextZIndex++;`${i}`!==r.style.zIndex&&(r.style.zIndex=`${i}`)})}}const F=new oe,l="@@ziContext",ae={mounted(e,t){const{value:n={}}=t,{zIndex:r,enabled:i}=n;e[l]={enabled:!!i,initialized:!1},i&&(F.ensureZIndex(e,r),e[l].initialized=!0)},updated(e,t){const{value:n={}}=t,{zIndex:r,enabled:i}=n,o=e[l].enabled;i&&!o&&(F.ensureZIndex(e,r),e[l].initialized=!0),e[l].enabled=!!i},unmounted(e,t){if(!e[l].initialized)return;const{value:n={}}=t,{zIndex:r}=n;F.unregister(e,r)}},Ee=ae,{c:ve}=Y(),Fe="vueuc-style";function L(e){return typeof e=="string"?document.querySelector(e):e()}const Te=_({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(e){return{showTeleport:ne(J(e,"show")),mergedTo:q(()=>{const{to:t}=e;return t??"body"})}},render(){return this.showTeleport?this.disabled?B("lazy-teleport",this.$slots):m(Q,{disabled:this.disabled,to:this.mergedTo},B("lazy-teleport",this.$slots)):null}});function H(e){return e instanceof HTMLElement}function O(e){for(let t=0;t<e.childNodes.length;t++){const n=e.childNodes[t];if(H(n)&&(V(n)||O(n)))return!0}return!1}function U(e){for(let t=e.childNodes.length-1;t>=0;t--){const n=e.childNodes[t];if(H(n)&&(V(n)||U(n)))return!0}return!1}function V(e){if(!ce(e))return!1;try{e.focus({preventScroll:!0})}catch{}return document.activeElement===e}function ce(e){if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.getAttribute("disabled"))return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return e.type!=="hidden"&&e.type!=="file";case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}}let f=[];const we=_({name:"FocusTrap",props:{disabled:Boolean,active:Boolean,autoFocus:{type:Boolean,default:!0},onEsc:Function,initialFocusTo:String,finalFocusTo:String,returnFocusOnDeactivated:{type:Boolean,default:!0}},setup(e){const t=ee(),n=T(null),r=T(null);let i=!1,o=!1;const z=typeof document>"u"?null:document.activeElement;function p(){return f[f.length-1]===t}function E(u){var s;u.code==="Escape"&&p()&&((s=e.onEsc)===null||s===void 0||s.call(e,u))}K(()=>{C(()=>e.active,u=>{u?(P(),g("keydown",document,E)):(h("keydown",document,E),i&&Z())},{immediate:!0})}),D(()=>{h("keydown",document,E),i&&Z()});function $(u){if(!o&&p()){const s=v();if(s===null||s.contains(N(u)))return;a("first")}}function v(){const u=n.value;if(u===null)return null;let s=u;for(;s=s.nextSibling,!(s===null||s instanceof Element&&s.tagName==="DIV"););return s}function P(){var u;if(!e.disabled){if(f.push(t),e.autoFocus){const{initialFocusTo:s}=e;s===void 0?a("first"):(u=L(s))===null||u===void 0||u.focus({preventScroll:!0})}i=!0,document.addEventListener("focus",$,!0)}}function Z(){var u;if(e.disabled||(document.removeEventListener("focus",$,!0),f=f.filter(x=>x!==t),p()))return;const{finalFocusTo:s}=e;s!==void 0?(u=L(s))===null||u===void 0||u.focus({preventScroll:!0}):e.returnFocusOnDeactivated&&z instanceof HTMLElement&&(o=!0,z.focus({preventScroll:!0}),o=!1)}function a(u){if(p()&&e.active){const s=n.value,x=r.value;if(s!==null&&x!==null){const b=v();if(b==null||b===x){o=!0,s.focus({preventScroll:!0}),o=!1;return}o=!0;const G=u==="first"?O(b):U(b);o=!1,G||(o=!0,s.focus({preventScroll:!0}),o=!1)}}}function W(u){if(o)return;const s=v();s!==null&&(u.relatedTarget!==null&&s.contains(u.relatedTarget)?a("last"):a("first"))}function X(u){o||(u.relatedTarget!==null&&u.relatedTarget===n.value?a("last"):a("first"))}return{focusableStartRef:n,focusableEndRef:r,focusableStyle:"position: absolute; height: 0; width: 0;",handleStartFocus:W,handleEndFocus:X}},render(){const{default:e}=this.$slots;if(e===void 0)return null;if(this.disabled)return e();const{active:t,focusableStyle:n}=this;return m(S,null,[m("div",{"aria-hidden":"true",tabindex:t?"0":"-1",ref:"focusableStartRef",style:n,onFocus:this.handleStartFocus}),e(),m("div",{"aria-hidden":"true",style:n,ref:"focusableEndRef",tabindex:t?"0":"-1",onFocus:this.handleEndFocus})])}});export{we as F,Te as L,ve as a,Ie as b,Fe as c,be as d,xe as e,fe as f,k as g,B as h,ge as i,pe as m,he as o,me as p,ye as u,Ee as z};
